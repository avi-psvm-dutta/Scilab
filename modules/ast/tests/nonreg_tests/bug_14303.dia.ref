// =============================================================================
// Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
// Copyright (C) 2016 - Scilab Enterprises - Pierre-Aime AGNEL
//
//  This file is distributed under the same license as the Scilab package.
// =============================================================================
// <-- CLI SHELL MODE -->
//
// <-- Non-regression test for bug 14303 -->
//
// <-- Bugzilla URL -->
// http://bugzilla.scilab.org/14303
//
// <-- Short Description -->
// Display of matrices with scientific notation and lots of digits
// were wrong
A = [1,0,0,0,0,0,0,0;
0,1,0,0,0,0,0,0;
-1,0,2,0,0,0,0,0;
0,-3,0,4,0,0,0,0;
1,0,-8,0,8,0,0,0;
0,5,0,-20,0,16,0,0;
-1,0,18,0,-48,0,32,0;
0,-7,0,56,0,-112,0,64]
 A  = 
   1.   0.   0.    0.    0.    0.     0.    0. 
   0.   1.   0.    0.    0.    0.     0.    0. 
  -1.   0.   2.    0.    0.    0.     0.    0. 
   0.  -3.   0.    4.    0.    0.     0.    0. 
   1.   0.  -8.    0.    8.    0.     0.    0. 
   0.   5.   0.   -20.   0.    16.    0.    0. 
  -1.   0.   18.   0.   -48.   0.     32.   0. 
   0.  -7.   0.    56.   0.   -112.   0.    64.
//display is ok
disp(expm(A));
         column 1 to 6
   2.7182818   0.          0.          0.          0.          0.       
   0.          2.7182818   0.          0.0000001   0.         -0.0000002
  -4.6707743   0.          7.3890561   0.          0.          0.       
   0.         -51.879868   0.          54.59815    0.          0.0000002
   986.51887   0.         -3964.7586   0.          2980.9581   0.       
   0.          5923608.3   0.         -14809151.   0.          8885544.9
  -3.505D+12   0.          2.980D+13   0.         -5.258D+13   0.       
   0.         -1.908D+08   0.          8.924D+08   0.         -1.243D+09
         column 7 to 8
   0.          0.       
   0.          8.396D-08
   0.          0.       
   0.         -7.490D-08
  -0.000061    0.       
   0.          0.000001 
   2.629D+13   0.       
   0.          5.417D+08
// now display is ok
format(25);
disp(expm(A));
         column 1 to 2
   2.7182818284590459789740   0.                      
   0.                         2.7182818015177225845491
  -4.6707742704716039838786   0.                      
   0.                        -51.879868171559834877371
   986.51887138491565565346   0.                      
   0.                         5923608.336195232346654 
  -3505325614554.6108398438   0.                      
   0.                        -190824518.11990356445312
         column 3 to 4
   0.                         0.                      
   0.                         0.0000001317192458835057
   7.3890560989306468542281   0.                      
   0.                         54.59814989296543075170 
  -3964.7586192011626735621   0.                      
   0.                        -14809150.540157752111554
   29795267732595.20703125    0.                      
   0.                         892372855.75740456581116
         column 5 to 6
   0.                         0.                      
   0.                        -0.0000001887344807005064
   0.                         0.                      
   0.                         0.0000001819498482334282
   2980.9580906107216833334   0.                      
   0.                         8885544.922243420034647 
  -52579884242037.671875      0.                      
   0.                        -1243259289.7225642204285
         column 7 to 8
   0.                         0.                      
   0.                         0.0000000839564363063566
   0.                         0.                      
   0.                        -0.000000074896572352002 
  -0.0000609660211250409242   0.                      
   0.                         0.0000009705089855263858
   26289942123999.79296875    0.                      
   0.                         541710954.80334520339966
A =  matrix(linspace(-1E10,1E20,64), 8, 8);
disp(A);
         column 1 to 3
  -10000000000.            12698412689682542592.   25396825389365084160.
   1587301577460317696.    14285714277142859776.   26984126976825401344.
   3174603164920635392.    15873015864603176960.   28571428564285718528.
   4761904752380952576.    17460317452063494144.   30158730151746035712.
   6349206339841270784.    19047619039523811328.   31746031739206352896.
   7936507927301587968.    20634920626984128512.   33333333326666670080.
   9523809514761904128.    22222222214444445696.   34920634914126987264.
   11111111102222221312.   23809523801904762880.   36507936501587304448.
         column 4 to 6
   38095238089047621632.   50793650788730167296.   63492063488412704768.
   39682539676507947008.   52380952376190484480.   65079365075873021952.
   41269841263968256000.   53968253963650801664.   66666666663333339136.
   42857142851428573184.   55555555551111110656.   68253968250793656320.
   44444444438888890368.   57142857138571436032.   69841269838253973504.
   46031746026349215744.   58730158726031753216.   71428571425714298880.
   47619047613809524736.   60317460313492070400.   73015873013174607872.
   49206349201269841920.   61904761900952379392.   74603174600634908672.
         column 7 to 8
   76190476188095234048.   88888888887777771520. 
   77777777775555559424.   90476190475238096896. 
   79365079363015884800.   92063492062698422272. 
   80952380950476177408.   93650793650158731264. 
   82539682537936502784.   95238095237619040256. 
   84126984125396828160.   96825396825079365632. 
   85714285712857137152.   98412698412539674624. 
   87301587300317462528.   100000000000000000000.
format(10);
disp(A);
         column 1 to 6
  -1.000D+10   1.270D+19   2.540D+19   3.810D+19   5.079D+19   6.349D+19
   1.587D+18   1.429D+19   2.698D+19   3.968D+19   5.238D+19   6.508D+19
   3.175D+18   1.587D+19   2.857D+19   4.127D+19   5.397D+19   6.667D+19
   4.762D+18   1.746D+19   3.016D+19   4.286D+19   5.556D+19   6.825D+19
   6.349D+18   1.905D+19   3.175D+19   4.444D+19   5.714D+19   6.984D+19
   7.937D+18   2.063D+19   3.333D+19   4.603D+19   5.873D+19   7.143D+19
   9.524D+18   2.222D+19   3.492D+19   4.762D+19   6.032D+19   7.302D+19
   1.111D+19   2.381D+19   3.651D+19   4.921D+19   6.190D+19   7.460D+19
         column 7 to 8
   7.619D+19   8.889D+19
   7.778D+19   9.048D+19
   7.937D+19   9.206D+19
   8.095D+19   9.365D+19
   8.254D+19   9.524D+19
   8.413D+19   9.683D+19
   8.571D+19   9.841D+19
   8.730D+19   1.000D+20
